<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CineArena</title>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const urlParams = new URLSearchParams(window.location.search);
      const streamId = urlParams.get('id');

      if (!streamId) return;

      fetch('https://raw.githubusercontent.com/Shubhamkur/Tv/refs/heads/main/tv')
        .then(response => response.json())
        .then(data => {
          const streamInfo = data.find(item => item.id === streamId);
          if (!streamInfo) return;

          const iframe = document.getElementById('stream-iframe');

          if (streamInfo.mpd && streamInfo.key) {
            const mpd = encodeURIComponent(streamInfo.mpd);
            const [key1, key2] = streamInfo.key.split(':');

            iframe.src = `https://tv4live.github.io/p14?mpd=${mpd}&keyId=${key1}&key=${key2}`;

          } else if (streamInfo.m3u8) {
            const m3u8 = encodeURIComponent(streamInfo.m3u8);
            iframe.src = `https://cinearena.live/hls-plyr.html?url=${m3u8}`;
          }
        });
    });
  </script>

</head>

<body style="margin:0;padding:0;width:100%;height:100%;background:#000;position:fixed;top:0;left:0;">
  <iframe id="stream-iframe"
          style="width:100%;height:100%;border:none;"
          allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
          loading="lazy"
          allowfullscreen>
  </iframe>
</body>

</html>
